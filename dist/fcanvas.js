!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).fcanvas={})}(this,(function(t){"use strict";const e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,100/6)},i=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||function(t){clearTimeout(t)},s="ontouchstart"in window||"onmsgesturechange"in window;let r=!1;function n(){}try{let t=Object.defineProperty({},"passive",{get:()=>(r=!0,!1)});window.addEventListener("testPassive",n,t),window.removeEventListener("testPassive",n,t)}catch{r=!1}const o=r,a={get:()=>window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},h={get:()=>window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight};function c(t){return null==t?"null":t.replace(/^\s+|\s+$/g,"")}function u(t){const e=t.split(" ");return 2===e.length?{size:parseFloat(e[0]),family:c(e[1]),weight:"normal"}:{size:parseFloat(e[1]),family:c(e[2]),weight:c(e[0])}}function l(t,e,i){if("string"!=typeof t)return parseFloat(t+"");{t=c(t);const s=parseFloat(t);switch(t.match(/[a-z%]+$/i)?.[1]||"px"){case"px":return s;case"em":return(i||0)*s;case"rem":return 16*(i||0);case"vw":return a.get()*s/100;case"vh":return h.get()*s/100;case"vmin":return Math.min(a.get(),h.get())*s/100;case"vmax":return Math.max(a.get(),h.get())*s/100;case"%":return e/100*s;default:return+s}}}function d(t,e){const i=t.getBoundingClientRect(),s=t.scrollWidth/t.width||1,r=t.scrollHeight/t.height||1,n=[],o=e.length;let a,h=0;for(;h<o;)a=e[h++],n.push({x:(a.clientX-i.left)/s,y:(a.clientY-i.top)/r,winX:a.clientX,winY:a.clientY,id:a.identifier});return n}function _(){const t="undefined"==typeof navigator?"":navigator.userAgent||navigator.vendor;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t.substr(0,4))}function m(t){return"number"==typeof t?t:parseFloat(`${t}`)}function f(t,e,i){return i.addEventListener(t,e),()=>{i.removeEventListener(t,e)}}class x{constructor(){this.__events=Object.create(null)}on(t,e){return"function"==typeof e&&(t in this.__events?this.__events[t].push(e):this.__events[t]=[e]),()=>{this.off(t,e)}}off(t,e){"function"==typeof e?(this.__events[t]=this.__events[t].filter((t=>t!==e)),0===this.__events[t].length&&delete this.__events[t]):delete this.__events[t]}emit(t,...e){if(t in this.__events)for(let i=0,s=this.__events[t].length;i<s;i++)this.__events[t][i](...e)}once(t,e){const i=(...s)=>{e(...s),this.off(t,i)};this.on(t,i)}}function g(t,e,i=[]){if(null!==t&&"object"==typeof t)if(Array.isArray(t))t.__reactive||(["push","pop","shift","unshift","splice"].forEach((s=>{const r=t[s];Object.defineProperty(t,s,{writable:!1,enumerable:!1,configurable:!0,value(){const t=r.apply(this,arguments);return e([...i],this,t),t}})})),Object.defineProperty(t,"__reactive",{writable:!1,enumerable:!1,configurable:!0,value:!0})),t.forEach(((t,s)=>{null!==t&&"object"==typeof t&&g(t,e,[...i,s+""])}));else{t.__reactive?t.__store={...t}:(Object.defineProperty(t,"__store",{writable:!0,enumerable:!1,configurable:!0,value:{...t}}),Object.defineProperty(t,"__reactive",{writable:!1,enumerable:!1,configurable:!0,value:!0}));for(const s in t)Object.defineProperty(t,s,{get:()=>t.__store?.[s],enumerable:!0,set(r){const n=t.__store?.[s];t.__store&&(t.__store[s]=r),r!==n&&(g(r,e,[...i,s]),e([...i,s],n,r))}}),g(t[s],e,[...i,s])}}class p{constructor(t){this.__emitter=new x;for(const e in t)this[e]=t[e];g(this,((t,e,i)=>{this.__emitter.emit(t.join("."),e,i)}))}$set(t,e,i){e in t||(t[e]=void 0,g(t,((t,e,i)=>{this.__emitter.emit(t.join("."),e,i)}))),t[e]=i}$watch(t,e){return this.__emitter.on(t,e)}}function w(t,e,i){return 0!==t&&(i.x=i.x%t),0!==e&&(i.y=i.y%e),i}function v(t,e,i,s){return 0!==t&&(s.x=s.x%t),0!==e&&(s.y=s.y%e),0!==i&&(s.z=s.z%i),s}class y{constructor(t=0,e=0,i=0){[this.x,this.y,this.z]=[t,e,i]}set(t,e,i){return t instanceof y?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this):t instanceof Array?(this.x=t[0]||0,this.y=t[1]||0,this.z=t[2]||0,this):(this.x=t||0,this.y=e||0,this.z=i||0,this)}copy(){return new y(this.x,this.y,this.z)}add(t,e,i){return t instanceof y?(this.x+=t.x||0,this.y+=t.y||0,this.z+=t.z||0,this):t instanceof Array?(this.x+=t[0]||0,this.y+=t[1]||0,this.z+=t[2]||0,this):(this.x+=t||0,this.y+=e||0,this.z+=i||0,this)}rem(t){if(t instanceof y)Number.isFinite(t.x)&&Number.isFinite(t.y)&&Number.isFinite(t.z)&&v(t.x,t.y,t.z,this);else if(t instanceof Array)t.every((function(t){return Number.isFinite(t)}))&&(2===t.length&&w(t[0],t[1],this),3===t.length&&v(t[0],t[1],t[2],this));else if(1===arguments.length)Number.isFinite(arguments[0])&&0!==arguments[0]&&(this.x=this.x%arguments[0],this.y=this.y%arguments[0],this.z=this.z%arguments[0]);else if(2===arguments.length){const t=[].slice.call(arguments);t.every((function(t){return Number.isFinite(t)}))&&2===t.length&&w(t[0],t[1],this)}else if(3===arguments.length){var e=[].slice.call(arguments);e.every((function(t){return Number.isFinite(t)}))&&3===e.length&&v(e[0],e[1],e[2],this)}}sub(t,e,i){return t instanceof y?(this.x-=t.x||0,this.y-=t.y||0,this.z-=t.z||0,this):t instanceof Array?(this.x-=t[0]||0,this.y-=t[1]||0,this.z-=t[2]||0,this):(this.x-=t||0,this.y-=e||0,this.z-=i||0,this)}mult(t){return this.x*=t,this.y*=t,this.z*=t,this}div(t){return 0===t?(console.warn("div:","divide by 0"),this):(this.x/=t,this.y/=t,this.z/=t,this)}mag(){return Math.sqrt(this.magSq())}magSq(){const{x:t,y:e,z:i}=this;return t*t+e*e+i*i}dot(t,e,i){return t instanceof y?this.dot(t.x,t.y,t.z):this.x*(t||0)+this.y*(e||0)+this.z*(i||0)}cross(t){return new y(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}normalize(){const t=this.mag();return 0!==t&&this.mult(1/t),this}limit(t){const e=this.magSq();return e>t**2&&this.div(Math.sqrt(e)).mult(t),this}setMag(t){return this.normalize().mult(t)}heading(){return Math.atan2(this.y,this.x)}rotate(t){const e=this.heading()+t,i=this.mag();return this.x=Math.cos(e)*i,this.y=Math.sin(e)*i,this}angleBetween(t){const e=this.dot(t)/(this.mag()*t.mag());return Math.acos(Math.min(1,Math.max(-1,e)))*Math.sign(this.cross(t).z||1)}lerp(t=0,e=0,i=0,s=0){return t instanceof y?this.lerp(t.x,t.y,t.z,e):(this.x+=(t-this.x)*s||0,this.y+=(e-this.y)*s||0,this.z+=(i-this.z)*s||0,this)}reflect(t){return t.normalize(),this.sub(t.mult(2*this.dot(t)))}array(){return[this.x||0,this.y||0,this.z||0]}equals(t,e,i){let s,r,n;return t instanceof y?(s=t.x||0,r=t.y||0,n=t.z||0):t instanceof Array?(s=t[0]||0,r=t[1]||0,n=t[2]||0):(s=t||0,r=e||0,n=i||0),this.x===s&&this.y===r&&this.z===n}toString(){return"Vector: ["+this.array().join(", ")+"]"}}function $(t,e,i,s,r,n=3){return function(t,e,i,s,r,n){switch(t){case"ease":return(e/=r/2)<1?s/2*Math.pow(e,n)+i:(e-=2,s/2*(Math.pow(e,n)+2)+i);case"quadratic":return(e/=r/2)<=1?s/2*e*e+i:s/2*-1*(--e*(e-2)-1)+i;case"sine-ease-in-out":return-s/2*(Math.cos(Math.PI*e/r)-1)+i;case"quintic-ease":return(e/=r/2)<1?s/2*Math.pow(e,5)+i:(e-=2,s/2*(Math.pow(e,5)+2)+i);case"exp-ease-in-out":return(e/=r/2)<1?s/2*Math.pow(2,10*(e-1))+i:(e--,s/2*(2-Math.pow(2,-10*e))+i);case"linear":return i+s/r*e}}(t,s,e,i-e,r,n)}function b(t){if(Array.isArray(t)){let e=Object.create(null);t.forEach(((t,i)=>{e[`${i}`]=t})),t=e}return t}function M(...t){let e,i,s;return"length"in t[0]||null!==t[0]&&"object"==typeof t[0]?(e=t[0],[s,i]=function(t){const e=t.findIndex((t=>"string"==typeof t));return e>-1?[t[e],+t[0===e?1:0]]:[t[1],+t[0]]}(t.slice(1))):e=b(t),[e,i,s]}function z(t,e,i){return Math.min(Math.max(e,t),i)}function P(t){const e=new Image;return e.src=t,new Promise(((t,i)=>{e.addEventListener("load",(function i(){t(e),e.removeEventListener("load",i)})),e.addEventListener("error",(function t(s){i(s),e.removeEventListener("error",t)}))}))}function B(...t){return 1===t.length?null!==t[0]&&"object"==typeof t[0]&&"length"in t[0]?t[0][Math.floor(Math.random()*t[0].length)]:Math.random()*t[0]:2===t.length?t[0]+Math.random()*(t[1]-t[0]):void 0}const C="function"==typeof Math.hypot?Math.hypot:(...t)=>{const e=t.length;let i=0,s=0;for(;i<e;)s+=Math.pow(t[i++],2);return Math.sqrt(s)};let R;function E(t,e=0,i=0,s=m(`${t.width}`),r=m(`${t.height}`),n=0){void 0===R&&(R=document.createElement("canvas").getContext("2d"));const o=n*Math.PI/180,[a,h]=function(t,e,i){return[Math.abs(t*Math.cos(i))+Math.abs(e*Math.sin(i)),Math.abs(t*Math.sin(i))+Math.abs(e*Math.cos(i))]}(s,r,o);R.canvas.width=s,R.canvas.height=r,R.save(),R.translate(s/2,r/2),R.rotate(n*Math.PI/180),R.drawImage(t,e,i,a,h,-a/2,-h/2,a,h),R.restore();const c=new Image;return c.src=R.canvas.toDataURL(),R.clearRect(0,0,s,r),c}class k{constructor(){this.__store=new p}on(t,e){if(this.__store[t])e();else{const i=this.__store.$watch(t,(()=>{e(),i()}))}}emit(t){this.__store.$set(this.__store,t,!0)}}function A(t){const e=t.textContent;let i=t.nextElementSibling;if(null==i)throw new Error("fCanvas<loadResourceImage>: Error because syntax error in file plist.");if("dict"===i.tagName){let t={};return Array.from(i.childNodes).filter((t=>"key"===t.tagName)).forEach((e=>{t={...t,...A(e)}})),{[e]:t}}if("array"===i.tagName){let t=[];return Array.from(i.childNodes).filter((t=>"key"===t.tagName)).forEach((e=>{t.push(A(e))})),{[e]:t}}return"string"===i.tagName?{[e]:i.textContent}:"integer"===i.tagName?{[e]:parseInt(i.textContent)}:"float"===i.tagName?{[e]:parseFloat(i.textContent)}:"true"===i.tagName?{[e]:!0}:"false"===i.tagName?{[e]:!1}:{}}class I{constructor(t,e){this.__caching=new Map,this.image=t,this.plist=e}get(t){if(this.has(t)){const{frame:e,rotated:i,sourceSize:s}=this.plist.frames[t],r=e.replace(/\{|\}|\s/g,"").split(","),n=s.replace(/\{|\}|\s/g,"").split(",");if(!1===this.__caching.has(t)){const e=E(this.image,+r[0],+r[1],+r[2],+r[3],i?-90:0);this.__caching.set(t,Object.assign(e,{image:e,size:{width:+n[0],height:+n[1]}}))}return this.__caching.get(t)}throw new Error(`fCanvas<addons/loadResourceImage>: Error does not exist this file "${t}" in declaration .plist`)}has(t){return t in this.plist.frames}}async function L(t){null==t.match(/\.plist$/)&&(t+=".plist");const e=await fetch(`${t}`).then((t=>t.text())).then((t=>(new DOMParser).parseFromString(t,"text/xml")));let i={};e.querySelectorAll("plist > dict:first-child > key").forEach((t=>{i={...i,...A(t)}}));const s=await P(function(...t){const e=t[0].replace(/\/$/,"").split("/");return t[0]=e.slice(0,e.length-1).join("/"),t.join("/")}(t,i?.metadata.realTextureFileName||i?.metadata.textureFileName));return new I(s,i)}class T{constructor(t){this._els=Object.create(null),this._idActiveNow=-1,this._queue=[],t?.constructor!==q&&(t=Y),this.__addEl(t)}get type(){return"x"in this&&"y"in this?"width"in this&&"height"in this?"rect":"radius"in this?"circle":"point":"unknown"}__addEl(t){t.id in this._els==!1&&(this._els[t.id]=t)}get $el(){return this.$parent.$el}_run(t){if(this.__addEl(t),this._idActiveNow=t.id,"function"==typeof this.update?("function"==typeof this.draw&&this.draw(),this.update()):"function"==typeof this.draw&&this.draw(),this._queue.length>0){const{length:t}=this._queue;let e=0;for(;e<t;)this.run(this._queue[e]),e++}this._idActiveNow=-1}add(...t){this._queue.push(...t)}run(t){this.$parent.run(t)}get $parent(){const t=this._els[-1===this._idActiveNow?0:this._idActiveNow];return t?.constructor===q?t:(console.warn("fCanvas: The current referenced version of the fCanvas.run function is incorrect."),this._els[0])}get $context2d(){return this.$parent.$context2d}sin(t){return this.$parent.sin(t)}asin(t){return this.$parent.asin(t)}cos(t){return this.$parent.cos(t)}acos(t){return this.$parent.asin(t)}tan(t){return this.$parent.tan(t)}atan(t){return this.$parent.atan(t)}atan2(t,e){return this.$parent.atan2(t,e)}get mouseX(){return this.$parent.mouseX}get mouseY(){return this.$parent.mouseY}get windowWidth(){return this.$parent.windowWidth}get windowHeight(){return this.$parent.windowHeight}fill(...t){this.$context2d.fillStyle=this.$parent._toRgb(t),this.$context2d.fill()}stroke(...t){this.$context2d.strokeStyle=this.$parent._toRgb(t),this.$context2d.stroke()}noFill(){this.fill(0,0,0,0)}lineWidth(t){if(void 0===t)return this.$context2d.lineWidth;this.$context2d.lineWidth=this.$parent._getPixel(t)}miterLimit(t){if(void 0===t)return this.$context2d.miterLimit;"miter"!==this.lineJoin()&&this.lineJoin("miter"),this.$context2d.miterLimit=t}shadowOffset(t,e){if(0===arguments.length)return{x:this.$context2d.shadowOffsetX,y:this.$context2d.shadowOffsetY};[this.$context2d.shadowOffsetX,this.$context2d.shadowOffsetY]=[this.$parent._getPixel(t||0),this.$parent._getPixel(e||0)]}measureText(t){return this.$parent.measureText(t)}begin(){this.$context2d.beginPath()}close(){this.$context2d.closePath()}save(){this.$parent.save()}restore(){this.$parent.restore()}rotate(t){if(void 0===t)return this.$parent.rotate();this.$parent.rotate(t)}translate(t,e){if(0===arguments.length)return this.$parent.translate();this.$parent.translate(t,e)}arc(t,e,i,s,r,n){this.begin(),this.$context2d.arc(this.$parent._getPixel(t),this.$parent._getPixel(e),i,this.$parent._toRadius(s)-Math.PI/2,this.$parent._toRadius(r)-Math.PI/2,n),this.close()}pie(t,e,i,s,r,n){this.begin(),this.move(t,e),this.arc(t,e,i,s,r,n),this.to(t,e),this.close()}line(t,e,i,s){this.move(t,e),this.to(i,s)}ellipse(t,e,i,s,r,n,o){this.begin(),this.$context2d.ellipse(this.$parent._getPixel(t),this.$parent._getPixel(e),i,s,this.$parent._toRadius(r)-Math.PI/2,this.$parent._toRadius(n),o),this.close()}circle(t,e,i){this.arc(t,e,i,0,"degress"===this.$parent.angleMode()?360:2*Math.PI)}point(t,e){this.circle(t,e,1)}triange(t,e,i,s,r,n){this.begin(),this.move(t,e),this.to(i,s),this.to(r,n),this.close()}drawImage(t,...e){this.$context2d.drawImage(t,...e)}rRect(t,e,i,s,r,n,o,a){this.begin(),[t,e,i,s]=this.$parent._argsRect(t,e,i,s);const h=this.$parent.fontSize(),c=[l(r,i,h),l(n,s,h),l(o,i,h),l(a,s,h)];this.move(t,e),this.arcTo(t+i,e,t+i,e+s-c[1],c[1]),this.arcTo(t+i,e+s,t+i-c[2],e+s,c[2]),this.arcTo(t,e+s,t,e+s-c[3],c[3]),this.arcTo(t,e,t+i-c[0],e,c[0]),this.close()}rect(t,e,i,s){this.begin(),[t,e,i,s]=this.$parent._argsRect(t,e,i,s),this.$context2d.rect(this.$parent._getPixel(t),this.$parent._getPixel(e),i,s),this.close()}quadratic(t,e,i,s){this.$context2d.quadraticCurveTo(t,e,i,s)}bezier(t,e,i,s,r,n){this.$context2d.bezierCurveTo(t,e,i,s,r,n)}move(t,e){this.$context2d.moveTo(this.$parent._getPixel(t),this.$parent._getPixel(e))}to(t,e){this.$context2d.lineTo(this.$parent._getPixel(t),this.$parent._getPixel(e))}fillText(t,e,i,s){this.$context2d.fillText(t,this.$parent._getPixel(e),this.$parent._getPixel(i),s)}strokeText(t,e,i,s){this.$context2d.strokeText(t,this.$parent._getPixel(e),this.$parent._getPixel(i),s)}fillRect(t,e,i,s){this.$context2d.fillRect(this.$parent._getPixel(t),this.$parent._getPixel(e),i,s)}strokeRect(t,e,i,s){this.$context2d.strokeRect(this.$parent._getPixel(t),this.$parent._getPixel(e),i,s)}lineDashOffset(t){if(void 0===t)return this.$context2d.lineDashOffset;this.$context2d.lineDashOffset=t}lineDash(...t){if(0===t.length)return this.$context2d.getLineDash();Array.isArray(t[0])&&this.$context2d.setLineDash(t[0]),this.$context2d.setLineDash(t)}arcTo(t,e,i,s,r){this.$context2d.arcTo(this.$parent._getPixel(t),this.$parent._getPixel(e),this.$parent._getPixel(i),this.$parent._getPixel(s),r)}isPoint(t,e){return this.$context2d.isPointInPath(t,e)}createImageData(t,e){return e?this.$parent.createImageData(t,e):this.$parent.createImageData(t)}getImageData(t,e,i,s){return this.$parent.getImageData(t,e,i,s)}putImageData(t,e,i,s,r,n,o){7===arguments.length?this.$parent.putImageData(t,e,i,s,r,n,o):this.$parent.putImageData(t,e,i)}createPattern(t,e){return this.$parent.createPattern(t,e)}createRadialGradient(t,e,i,s,r,n){return this.$parent.createRadialGradient(t,e,i,s,r,n)}createLinearGradient(t,e,i,s){return this.$parent.createLinearGradient(t,e,i,s)}lineJoin(t){if(void 0===t)return this.$context2d.lineJoin;this.$context2d.lineJoin=t}lineCap(t){if(void 0===t)return this.$context2d.lineCap;this.$context2d.lineCap=t}shadowBlur(t){if(void 0===t)return this.$context2d.shadowBlur;this.$context2d.shadowBlur=t}shadowColor(...t){this.$context2d.shadowColor=this.$parent._toRgb(t)}drawFocusIfNeeded(t,e){void 0===e?this.$context2d.drawFocusIfNeeded(t):this.$context2d.drawFocusIfNeeded(t,e)}polyline(...t){if(t.length>0)if(Array.isArray(t[0])){this.move(t[0][0],t[0][1]);let e=1;const{length:i}=t;for(;e<i;)this.to(t[e][0],t[e][1]),e++}else if(t.length>1){this.move(t[0],t[1]);let e=2;const{length:i}=t;for(;e<i-1;)this.to(t[e],t[e+1]),e+=2}}polygon(...t){Array.isArray(t[0])?this.polyline(...t,t[0]):this.polyline(...t,t[0],t[1])}}class N extends T{constructor(t,e,i){super(),this.__z=0,[this.__x,this.__y,this.__z]=[t,e,i||0]}get scale(){return N.persistent/(N.persistent+this.__z)}get x(){return(this.__x-this.$parent.width/2)*this.scale+this.$parent.width/2}set x(t){this.__x=t}get y(){return(this.__y-this.$parent.height/2)*this.scale+this.$parent.height/2}set y(t){this.__y=t}get z(){return this.__z}set z(t){this.__z=t}get(t){return"number"==typeof t?this.scale*t:this.scale*this[t]}}function D(t){return new class extends T{constructor(){super(...arguments),this.draw=t}}}N.persistent=1e3;let j=!1;const S=new x;async function F(t){if("complete"===document.readyState){const e=t();e&&"length"in e&&await e,j=!0,S.emit("load")}else await new Promise((e=>{function i(){document.removeEventListener("DOMContentLoaded",i),window.removeEventListener("load",i),t(),e(),j=!0,S.emit("load")}document.addEventListener("DOMContentLoaded",i),window.addEventListener("load",i)}))}function O(t,i){!0===i.acceptClear&&i.clear(),t(),!0===i.acceptLoop&&e((()=>O(t,i)))}function X(t,e){j?e?O(t,e):t():S.once("load",(()=>{X(t,e)}))}class q{constructor(t,e,i){switch(this._id=q._count++,this._el=document.createElement("canvas"),this._context2dCaching=null,this._stamentReady=new k,this.__store={__translate:Object.create({x:0,y:0,sumX:0,sumY:0}),__scale:Object.create({x:0,y:0,sumX:0,sumY:0}),__rotate:Object.create({now:0,sum:0}),__attributeContext:Object.create({alpha:!0,desynchronized:!1}),_clear:!0,_loop:!0,_preventTouch:!1,_stopTouch:!1,_idFrame:null,_existsPreload:!1,_angleMode:"degress",_rectMode:"corner",_colorMode:"rgb",_useFloatPixel:!0},this.handlerEvent=t=>{try{"mouseout"!==t.type?(this.touches=d(this.$el,t.touches||[t]),this.changedTouches=d(this.$el,t.changedTouches||[t])):this.touches=[],this.__store._preventTouch&&t.preventDefault(),this.__store._stopTouch&&t.stopPropagation()}catch(t){}},this.touches=[],this.changedTouches=[],this.createElement=D,arguments.length){case 1:this.mount(t);break;case 2:this.size(t,i);break;case 3:this.mount(t),this.size(e,i)}this.restartEvents()}get $el(){return this._el}size(t,e){this.$el.width=t,this.$el.height=e}cancelEventsSystem(){["touchstart","mouseover","touchmove","mousemove","touchend","mouseout"].forEach((t=>{this.$el.removeEventListener(t,this.handlerEvent)}))}restartEvents(){this.cancelEventsSystem(),this.$el.addEventListener(_()?"touchstart":"mouseover",this.handlerEvent,o?{passive:!0}:void 0),this.$el.addEventListener(_()?"touchmove":"mousemove",this.handlerEvent,o?{passive:!0}:void 0),this.$el.addEventListener(_()?"touchend":"mouseout",this.handlerEvent,o?{passive:!0}:void 0)}preventTouch(){return!1===this.__store._preventTouch&&(this.__store._preventTouch=!0,!0)}stopTouch(){return!1===this.__store._preventTouch&&(this.__store._stopTouch=!0,!0)}get mouseX(){return this.touches[0]?.x||null}get mouseY(){return this.touches[0]?.y||null}get interact(){return this.touches.length>0}get id(){return this._id}_createNewContext2d(){this._context2dCaching=this.$el.getContext("2d",this.__store.__attributeContext)}acceptBlur(){return this.__store.__attributeContext.alpha}blur(){this.__store.__attributeContext.alpha=!0,this._createNewContext2d()}noBlur(){this.__store.__attributeContext.alpha=!1,this._createNewContext2d()}acceptDesync(){return this.__store.__attributeContext.desynchronized}desync(){this.__store.__attributeContext.desynchronized=!0,this._createNewContext2d()}noDesync(){this.__store.__attributeContext.desynchronized=!1,this._createNewContext2d()}useFloatPixel(){this.__store._useFloatPixel=!0}noFloatPixel(){this.__store._useFloatPixel=!1}_getPixel(t){return this.__store._useFloatPixel?t:Math.round(t)}get $context2d(){return null===this._context2dCaching&&this._createNewContext2d(),this._context2dCaching}append(t=document.body){!1===t.contains(this.$el)&&t.appendChild(this.$el)}mount(t){let e;"string"==typeof t?e=Array.from(document.querySelectorAll(t)).find((t=>"CANVAS"===t.tagName))||this._el:"CANVAS"!==t.tagName?(console.error(`fCanvas<sys>: function .mount() not allow element "${t?.tagName.toLocaleLowerCase()}`),e=this._el):e=t,this._el!==e&&this.cancelEventsSystem(),this._el=e}noClear(){this.__store._clear=!1}get acceptClear(){return this.__store._clear}run(...t){let e=0;const{length:i}=t;for(;e<i;)t[e++]._run(this)}get width(){return this.$el.width}set width(t){this.$el.width=t}get height(){return this.$el.height}set height(t){this.$el.height=t}get windowWidth(){return a.get()}get windowHeight(){return h.get()}save(){this.$context2d.save()}restore(){this.$context2d.restore()}_toRadius(t){return"degress"===this.__store._angleMode?t*Math.PI/180:t}_toDegress(t){return"degress"===this.__store._angleMode?180*t/Math.PI:t}_toRgb([t=0,e=t,i=e,s=1]){if(Array.isArray(t))return this._toRgb(t);if("object"==typeof t&&null!==t)return t;if("string"==typeof t)return t;{const r=this.__store._colorMode.match(/hsl|hsb/i)?"%":"";return`${this.__store._colorMode}a(${[t,e+r,i+r,s].join(",")})`}}_argsRect(t,e,i,s){switch(this.__store._rectMode){case"center":return[t-i/2,e-s/2,i,s];case"radius":return[t-i,e-s,2*i,2*s];case"corners":return[t-i,e-s,i,s];case"corner":default:return[t,e,i,s]}}angleMode(t){if(void 0===t)return this.__store._angleMode;this.__store._angleMode=t}colorMode(t){if(void 0===t)return this.__store._colorMode;this.__store._colorMode=t}rectMode(t){if(void 0===t)return this.__store._rectMode;this.__store._rectMode=t}fontSize(t){const{size:e,weight:i,family:s}=u(this.font());if(void 0===t)return e;t=l(t,e,e),this.font([i,`${t}px`,s].join(" "))}fontFamily(t){const{size:e,weight:i,family:s}=u(this.font());if(void 0===t)return s;this.font([i,`${e}px`,t].join(" "))}fontWeight(t){const{size:e,weight:i,family:s}=u(this.font());if(void 0===t)return i;this.font([t,`${e}px`,s].join(" "))}clear(t=0,e=0,i=this.width,s=this.height){this.$context2d.clearRect(t,e,i,s)}background(...t){this.$context2d.fillStyle=this._toRgb(t),this.$context2d.fill(),this.$context2d.fillRect(0,0,this.width,this.height)}backgroundImage(t){this.$context2d.drawImage(t,0,0,this.width,this.height)}createImageData(t,e){return e?this.$context2d.createImageData(t,e):this.$context2d.createImageData(t)}getImageData(t,e,i,s){return this.$context2d.getImageData(t,e,i,s)}putImageData(t,e,i,s,r,n,o){7===arguments.length?this.$context2d.putImageData(t,e,i,s,r,n,o):this.$context2d.putImageData(t,e,i)}createPattern(t,e){return this.$context2d.createPattern(t,e)}createRadialGradient(t,e,i,s,r,n){return this.$context2d.createRadialGradient(t,e,i,s,r,n)}createLinearGradient(t,e,i,s){return this.$context2d.createLinearGradient(t,e,i,s)}toDataURL(t="image/png",e){return this.$el.toDataURL(t,e)}rotate(t){if(void 0===t)return this.__store.__rotate.now;this.$context2d.rotate(this.__store.__rotate.now=this._toRadius(t)),this.__store.__rotate.sum+=this.__store.__rotate.now%360}resetRotate(){this.rotate(-this.__store.__rotate.sum)}resetTransform(){this.setTransform(1,0,0,1,0,0)}async preload(t){this.__store._existsPreload=!0,await t(),this._stamentReady.emit("preloaded")}async setup(t){this.__store._existsPreload?this._stamentReady.on("preloaded",(async()=>{await F(t),this._stamentReady.emit("setuped")})):(await F(t),this._stamentReady.emit("setuped"))}draw(t){this._stamentReady.on("setuped",(()=>{X(t,this)}))}font(t){if(void 0===t)return this.$context2d.font;this.$context2d.font=t}textAlign(t){if(void 0===t)return this.$context2d.textAlign;this.$context2d.textAlign=t}textBaseline(t){if(void 0===t)return this.$context2d.textBaseline;this.$context2d.textBaseline=t}operation(t){if(void 0===t)return this.$context2d.globalCompositeOperation;this.$context2d.globalCompositeOperation=t}alpha(t){if(void 0===t)return this.$context2d.globalAlpha;this.$context2d.globalAlpha=t}resetAlpha(){this.alpha(1)}translate(t,e){if(0===arguments.length)return{x:this.__store.__translate.x,y:this.__store.__translate.y};t=this._getPixel(t||0),e=this._getPixel(e||0),this.$context2d.translate(t,e),this.__store.__translate.sumX+=t,this.__store.__translate.sumY+=e}resetTranslate(){this.$context2d.translate(-this.__store.__translate.sumX,-this.__store.__translate.sumY)}scale(t,e){if(0===arguments.length)return{x:this.__store.__scale.x,y:this.__store.__scale.y};this.$context2d.scale(t,e),this.__store.__scale.sumX+=t||0,this.__store.__scale.sumY+=e||0}resetScale(){this.$context2d.translate(-this.__store.__scale.sumX,-this.__store.__scale.sumY)}clip(t,e){void 0===e&&this.$context2d.clip(t),this.$context2d.clip(e,t)}transform(t,e,i,s,r,n){if(0===arguments.length)return this.$context2d.getTransform();if(t instanceof DOMMatrix){const{a:e=1,b:i=0,c:s=0,d:r=1,e:n=0,f:o=0}=t;this.$context2d.transform(e,i,s,r,n,o)}else this.$context2d.transform(t,e,i,s,r,n)}setTransform(t,e,i,s,r,n){if(t instanceof DOMMatrix){const{a:e=1,b:i=0,c:s=0,d:r=1,e:n=0,f:o=0}=t;this.$context2d.setTransform(e,i,s,r,n,o)}else this.$context2d.setTransform(t,e,i,s,r,n)}measureText(t){return this.$context2d.measureText(t).width}sin(t){return Math.sin(this._toRadius(t))}asin(t){return this._toDegress(Math.asin(t))}cos(t){return Math.cos(this._toRadius(t))}acos(t){return this._toDegress(Math.acos(t))}tan(t){return Math.tan(this._toRadius(t))}atan(t){return this._toDegress(Math.atan(t))}atan2(t,e){return this._toDegress(Math.atan2(t,e))}cursor(){this.$el.style.cursor="auto"}noCursor(){this.$el.style.cursor="none"}loop(){this.__store._loop=!0,this._stamentReady.emit("setuped")}noLoop(){this.__store._loop=!1,this.__store._idFrame&&i(this.__store._idFrame)}get acceptLoop(){return this.__store._loop}mouseIn(t){return f("mouseover",t,this.$el)}mouseOut(t){return f("mouseout",t,this.$el)}touchStart(t){return f("touchstart",t,this.$el)}touchMove(t){return f("touchmove",t,this.$el)}touchEnd(t){return f("touchend",t,this.$el)}mouseMove(t){return f("mousemove",t,this.$el)}mouseUp(t){return f("mouseup",t,this.$el)}mouseDown(t){return f("mousedown",t,this.$el)}mouseClicked(t){return f("click",t,this.$el)}}q.Element=T,q.Point3D=class extends T{constructor(t,e,i){super(),this.x=0,this.y=0,this.z=0,[this.x,this.y,this.z]=[t||0,e||0,i||0]}rotateX(t){this.y=this.y*this.$parent.cos(t)+this.z*this.$parent.sin(t),this.z=-this.y*this.$parent.sin(t)+this.z*this.$parent.cos(t)}rotateY(t){this.x=this.x*this.$parent.cos(t)+this.z*this.$parent.sin(t),this.z=-this.x*this.$parent.sin(t)+this.z*this.$parent.cos(t)}rotateZ(t){this.x=this.x*this.$parent.cos(t)-this.y*this.$parent.sin(t),this.y=this.x*this.$parent.sin(t)+this.y*this.$parent.cos(t)}},q.Point3DCenter=N,q._count=0;const Y=new q;function V(t){let{x:e,y:i}=t;return"rect"===t.type&&([e,i]=t.$parent._argsRect(t.x,t.y,t.width,t.height)),{x:e,y:i}}function W(t,e){let{x:i,y:s}=V(t),{x:r,y:n}=V(e);return 180*Math.atan2(r-i,n-s)/Math.PI}function G(t,e){switch(t.type){case"rect":switch(e.type){case"rect":if(h=e,(a=t).x<h.x+h.width&&a.x+a.width>h.x&&a.y<h.y+h.height&&a.y+a.height>h.y)return{direction:W(t,e),element:e};break;case"circle":if(function(t,e){const i=Math.max(e.x,Math.min(t.x,e.x+e.width)),s=Math.max(e.y,Math.min(t.y,e.y+e.height));return(i-t.x)*(i-t.x)+(s-t.y)*(s-t.y)<t.radius**2}(e,t))return{direction:W(t,e),element:e};break;case"point":if(r=t,n=e.x,o=e.y,null!=n&&null!=o&&r.x<n&&r.x+r.width>n&&r.y<o&&r.y+r.height>o)return{direction:W(t,e),element:e}}break;case"circle":switch(e.type){case"rect":return G(e,t);case"circle":if(s=e,((i=t).x-s.x)**2+(i.y-s.y)**2<(i.radius+s.radius)**2)return{direction:W(t,e),element:e};break;case"point":if(function(t,e,i){return null!=e&&null!=i&&(e-t.x)**2+(i-t.y)**2<t.radius**2}(t,e.x,e.y))return{direction:W(t,e),element:e}}break;case"point":switch(e.type){case"rect":case"circle":return G(e,t);case"point":if(t.x===e.x&&t.y===e.y)return{direction:W(t,e),element:e}}}var i,s,r,n,o,a,h;return null}t.Animate=class{constructor(...t){this.__data={__observe:{}},this.__fps=1e3/60,this.__eventsStore=Object.create(null),this.__queue=[],this.time=0,this.easing="ease",this.__frame=1;const[e,i,s]=M(...t);this.data=e??this.data,this.time=Number.isNaN(i)?this.time:i??this.time,this.easing=s??this.easing}set data(t){this.__data=function(t,e){delete t.__observe,t=b(t);const i={};for(const s in t)i[s]=[t[s],t[s]],Object.defineProperty(t,s,{get:()=>$(e.easing,i[s][0],i[s][1],e.frame,e.frames),set(t){i[s][1]=t}});return Object.defineProperty(t,"__observe",{writable:!0,enumerable:!1,configurable:!0,value:i}),t}(t,this);for(const t in this.__data)Object.defineProperty(this,t,{get(){return this.__data[t]}})}get(t){return this.__data[t]}get frames(){return Math.max(function(t,e=1e3/60){return t/e}(this.time,this.__fps),1)}get frame(){return Math.min(this.__frame,this.frames)}set frame(t){this.__frame=Math.min(t,this.frames),this.frame===this.frames&&(this.emit("done"),this.__queue.length>0&&(this._to(...this.__queue[0]),this.__queue.splice(0,1)))}on(t,e){t in this.__eventsStore?this.__eventsStore[t].push(e):this.__eventsStore[t]=[e]}off(t,e){e?(this.__eventsStore[t]=this.__eventsStore[t]?.filter((t=>t!==e)),0===this.__eventsStore[t]?.length&&delete this.__eventsStore[t]):delete this.__eventsStore[t]}emit(t,...e){this.__eventsStore[t]?.forEach((t=>{t.call(this,...e)}))}once(t,e){const i=(...s)=>{e.call(this,...s),this.off(t,i)};this.on(t,i)}setFPS(t){this.__fps=t}action(){this.frame++}cancel(t){if(t)t in this.__data&&t in this.__data.__observe&&(this.__data.__observe[t][0]=this.__data[t],this.emit("cancel",t));else for(const t in this.__data)this.cancel(t)}_to(...t){const[e,i,s]=M(...t);for(const t in e)t in this.__data&&t in this.__data.__observe?(this.cancel(t),this.__data.__observe[t][1]=+e[t]):console.error(`fCanvas<animate.ts>: "${t}" is not signed.`);this.frame=0,this.time=Number.isNaN(i)?this.time:i??this.time,this.easing=s??this.easing}to(...t){this._to(...t),this.__queue.splice(0)}get running(){return this.frame<this.frames}add(...t){this.__queue.push(M(...t))}set(...t){this.data=M(...t)[0]}},t.Camera=class{constructor(t,e,i,s,r,n,o,a,h,c){this.viewport={width:0,height:0},this.viewBox={mx:0,my:0,width:0,height:0},this._cx=0,this._cy=0,this.cursor={__camera:this,use:!0,idealX:0,idealY:0,idealRX:0,offsetTop:0,offsetRight:0,offsetBottom:0,offsetLeft:0,width:0,height:0,get x(){if(this.__camera._cx<-this.__camera.viewBox.mx){const t=-this.__camera.viewBox.mx-this.__camera._cx;return this.idealX-t}if(this.__camera._cx>this.__camera.viewport.width-this.__camera.viewBox.width){const t=this.__camera.viewport.width-this.__camera.viewBox.width-this.__camera._cx;return this.idealX-t}return this.idealX},set x(t){t<this.idealX&&(this.__camera._cx=t-this.idealX-this.__camera.viewBox.mx),t>this.idealX+this.idealRX&&(this.__camera._cx=t-this.idealX+this.__camera.viewport.width-this.__camera.viewBox.width-this.width)},get y(){if(this.__camera._cy<-this.__camera.viewBox.my){const t=-this.__camera.viewBox.my-this.__camera._cy;return this.idealY-t}if(this.__camera._cy>this.__camera.viewport.height-this.__camera.viewBox.height){const t=this.__camera.viewport.height-this.__camera.viewBox.height-this.__camera._cy;return this.idealY-t}return this.idealY},set y(t){t<this.idealY&&(this.__camera._cy=t-this.idealY-this.__camera.viewBox.my),t>this.idealY&&(this.__camera._cy=t-this.idealY+this.__camera.viewport.height-this.__camera.viewBox.height-this.height)}},this.setViewport(t||0,e||0),this.setViewBox(i||0,s||0,r||0,n||0),!1===o?this.setCursor(!1):this.setCursor(o,a,h,c)}get cx(){return this._cx}set cx(t){this.cursor.use?this._cx=z(t,-this.cursor.idealX-this.viewBox.mx-this.cursor.offsetLeft,this.viewport.width-this.viewBox.width+(this.viewBox.width-this.cursor.idealX-this.cursor.width)+this.cursor.offsetRight):this._cx=z(t,-this.viewBox.mx,this.viewport.width-this.viewBox.width)}get cy(){return this._cy}set cy(t){this.cursor.use?this._cy=z(t,-this.cursor.idealY-this.viewBox.my-this.cursor.offsetTop,this.viewport.height-this.viewBox.height+(this.viewBox.height-this.cursor.idealY-this.cursor.height)+this.cursor.offsetBottom):this._cy=z(t,-this.viewBox.my,this.viewport.height-this.viewBox.height)}setViewport(t,e){this.viewport.width=t||0,this.viewport.height=e||0}setViewBox(t,e,i,s){this.viewBox.mx=t||0,this.viewBox.my=e||0,this.viewBox.width=i||0,this.viewBox.height=s||0}setCursor(t,e,i,s){1===arguments.length?!1===t&&(this.cursor.use=!1):(this.cursor.idealX=t||0,this.cursor.idealY=e||0,this.cursor.width=i||0,this.cursor.height=s||0)}followX(t,e=1){return t-z(this._cx*e,-this.viewBox.mx,this.viewport.width-this.viewBox.width)}followY(t,e=1){return t-z(this._cy*e,-this.viewBox.my,this.viewport.height-this.viewBox.height)}followVector(t,e=1,i=e){return t.set(this.followX(t.x,e),this.followY(t.y,i))}follow(t,e,i=1,s=i){return{x:this.followX(t,i),y:this.followY(e,s)}}xInViewBox(t,e=0,i=1){return t=this.followX(t,i),this.viewBox.mx<t+e&&this.viewBox.mx+this.viewBox.width>t}yInViewBox(t,e=0,i=1){return t=this.followY(t,i),this.viewBox.my<t+e&&this.viewBox.my+this.viewBox.height>t}inViewBox(t,e,i=0,s=0,r=1,n=r){return this.xInViewBox(t,i,r)&&this.yInViewBox(e,s,n)}xAfterViewBox(t,e=0,i=1){return t=this.followX(t,i),this.viewBox.mx>=t+e}yAfterViewBox(t,e=0,i=1){return t=this.followY(t,i),this.viewBox.my>=t+e}afterViewBox(t,e,i=0,s=0,r=1,n=r){return this.xAfterViewBox(t,i,r)&&this.yAfterViewBox(e,s,n)}xBeforeViewBox(t,e=1){return t=this.followX(t,e),this.viewBox.mx+this.viewBox.width<=t}yBeforeViewBox(t,e=1){return t=this.followY(t,e),this.viewBox.my+this.viewBox.height<=t}beforeViewBox(t,e,i=1,s=i){return this.xBeforeViewBox(t,i)&&this.yBeforeViewBox(e,s)}},t.Emitter=x,t.Resource=class{constructor(t,e=!0){this._resourcesLoaded=new Map,this._desResources=Object.create(null);const i={};for(const e in t)"object"==typeof t[e]?i[e]={...t[e]}:i[e]={src:t[e],lazy:!1};if(this._desResources=i,e){const t=[];for(const e in this._desResources)!1===this._desResources[e].lazy&&t.push(this.load(e));return new Promise((async(e,i)=>{try{await Promise.all(t),e(this)}catch(t){i(t)}}))}}isLoaded(t){if(t)return this._resourcesLoaded.has(t);for(const t in this._desResources)if(!1===this._resourcesLoaded.has(t))return!1;return!0}async load(t){t&&(t in this._desResources?!1===this.isLoaded(t)?this._resourcesLoaded.set(t,await L(this._desResources[t].src)):console.warn(`fCanvas<Resource>: "${t}" resource loaded.`):console.error(`fCanvas<Resource>: "${t} resource not exists.`))}get(t){const e=t.split("/"),i=e[0],s=e.slice(1).join("/");if(this._resourcesLoaded.has(i))return this._resourcesLoaded.get(i).get(s);throw i in this._desResources?new Error(`fCanvas<Resource>: "${i} not loaded.`):new Error(`fCanvas<Resource>: "${i}" not exitst.`)}},t.Stament=k,t.Store=p,t.Vector=y,t.aspectRatio=function(t,e,i){const s=t*i;return e<s?[e,e/t]:[s,i]},t.cancelAnimationFrame=i,t.changeSize=function(t,e=window){return f("resize",t,e)},t.constrain=z,t.createElement=D,t.cutImage=E,t.default=q,t.draw=X,t.even=function(t,e,i){return t===e?i:t-1},t.getDirectionElement=W,t.hypot=C,t.interferings=function(t,...e){let i;return e.some((e=>{const s=G(t,e);if(s)return i=s,!0})),i??null},t.isMobile=_,t.isTouch=s,t.keyPressed=function(t,e=window){return f("keydown",t,e)},t.keyUp=function(t,e=window){return f("keyup",t,e)},t.lerp=function(t,e,i){return i*(e-t)+t},t.loadAudio=function(t){const e=document.createElement("audio");return e.src=t,new Promise(((t,i)=>{e.addEventListener("load",(function i(){t(e),e.removeEventListener("load",i)})),e.addEventListener("error",(function t(s){i(s),e.removeEventListener("error",t)}))}))},t.loadImage=P,t.loadResourceImage=L,t.map=function(t,e,i,s,r){return(t-e)*(r-s)/(i-e)+s},t.mouseClicked=function(t,e=window){return f("click",t,e)},t.mouseMoved=function(t,e=window){return f("mousemove",t,e)},t.mousePressed=function(t,e=window){return f("mousedown",t,e)},t.mouseWheel=function(t,e=window){return f("wheel",t,e)},t.odd=function(t,e,i){return t===i?e:t+1},t.passive=o,t.random=B,t.randomInt=function(t,e){return void 0===e?Math.round(B(t)):Math.round(B(t,e))},t.range=function(t,e,i){i=i||1;const s=[];let r=!1;if(void 0===e&&(e=t,t=1),"string"==typeof t&&(t=t.charCodeAt(0),e=e.charCodeAt(0),r=!0),t!==e&&Math.abs(e-t)<Math.abs(i))throw new Error("range(): step exceeds the specified range.");if(e>t)for(i<0&&(i*=-1);t<=e;)s.push(r?String.fromCharCode(t):t),t+=i;else for(i>0&&(i*=-1);t>=e;)s.push(r?String.fromCharCode(t):t),t+=i;return s},t.requestAnimationFrame=e,t.setup=F,t.touchEnd=function(t,e=window){return f("touchend",t,e)},t.touchMove=function(t,e=window){return f("touchmove",t,e)},t.touchStart=function(t,e=window){return f("touchstart",t,e)},Object.defineProperty(t,"__esModule",{value:!0})}));
