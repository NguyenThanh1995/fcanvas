!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).fcanvas={})}(this,(function(t){"use strict";const e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,100/6)},s=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||function(t){clearTimeout(t)},i="ontouchstart"in window||"onmsgesturechange"in window;let n=!1;function r(){}try{let t=Object.defineProperty({},"passive",{get:()=>(n=!0,!1)});window.addEventListener("testPassive",r,t),window.removeEventListener("testPassive",r,t)}catch{n=!1}const o=n,a={get:()=>window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},h={get:()=>window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight};function c(t){return null==t?"null":t.replace(/^\s+|\s+$/g,"")}function u(t){const e=t.split(" ");return 2===e.length?{size:parseFloat(e[0]),family:c(e[1]),weight:"normal"}:{size:parseFloat(e[1]),family:c(e[2]),weight:c(e[0])}}function l(t,e,s){if("string"!=typeof t)return parseFloat(t+"");{t=c(t);const i=parseFloat(t);switch(t.match(/[a-z%]+$/i)?.[1]||"px"){case"px":return i;case"em":return(s||0)*i;case"rem":return 16*(s||0);case"vw":return a.get()*i/100;case"vh":return h.get()*i/100;case"vmin":return Math.min(a.get(),h.get())*i/100;case"vmax":return Math.max(a.get(),h.get())*i/100;case"%":return e/100*i;default:return+i}}}function d(t,e){const s=t.getBoundingClientRect(),i=t.scrollWidth/t.width||1,n=t.scrollHeight/t.height||1,r=[],o=e.length;let a,h=0;for(;h<o;)a=e[h++],r.push({x:(a.clientX-s.left)/i,y:(a.clientY-s.top)/n,winX:a.clientX,winY:a.clientY,id:a.identifier});return r}function _(){const t="undefined"==typeof navigator?"":navigator.userAgent||navigator.vendor;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t.substr(0,4))}function f(t){return"number"==typeof t?t:parseFloat(`${t}`)}function m(t,e,s){return s.addEventListener(t,e),()=>{s.removeEventListener(t,e)}}class g{constructor(t){this._els=Object.create(null),this._idActiveNow=-1,this._queue=[],t?.constructor!==R&&(t=E),this.__addEl(t)}get type(){return"x"in this&&"y"in this?"width"in this&&"height"in this?"rect":"radius"in this?"circle":"point":"unknown"}__addEl(t){t.id in this._els==!1&&(this._els[t.id]=t)}get $el(){return this.$parent.$el}_run(t){if(this.__addEl(t),this._idActiveNow=t.id,"function"==typeof this.update?("function"==typeof this.draw&&this.draw(),this.update()):"function"==typeof this.draw&&this.draw(),this._queue.length>0){const{length:t}=this._queue;let e=0;for(;e<t;)this.run(this._queue[e]),e++}this._idActiveNow=-1}add(...t){this._queue.push(...t)}run(t){this.$parent.run(t)}get $parent(){const t=this._els[-1===this._idActiveNow?0:this._idActiveNow];return t?.constructor===R?t:(console.warn("fCanvas: The current referenced version of the fCanvas.run function is incorrect."),this._els[0])}get $context2d(){return this.$parent.$context2d}sin(t){return this.$parent.sin(t)}asin(t){return this.$parent.asin(t)}cos(t){return this.$parent.cos(t)}acos(t){return this.$parent.asin(t)}tan(t){return this.$parent.tan(t)}atan(t){return this.$parent.atan(t)}atan2(t,e){return this.$parent.atan2(t,e)}get mouseX(){return this.$parent.mouseX}get mouseY(){return this.$parent.mouseY}get windowWidth(){return this.$parent.windowWidth}get windowHeight(){return this.$parent.windowHeight}fill(...t){this.$context2d.fillStyle=this.$parent._toRgb(t),this.$context2d.fill()}stroke(...t){this.$context2d.strokeStyle=this.$parent._toRgb(t),this.$context2d.stroke()}noFill(){this.fill(0,0,0,0)}lineWidth(t){if(void 0===t)return this.$context2d.lineWidth;this.$context2d.lineWidth=this.$parent._getPixel(t)}miterLimit(t){if(void 0===t)return this.$context2d.miterLimit;"miter"!==this.lineJoin()&&this.lineJoin("miter"),this.$context2d.miterLimit=t}shadowOffset(t,e){if(0===arguments.length)return{x:this.$context2d.shadowOffsetX,y:this.$context2d.shadowOffsetY};[this.$context2d.shadowOffsetX,this.$context2d.shadowOffsetY]=[this.$parent._getPixel(t||0),this.$parent._getPixel(e||0)]}measureText(t){return this.$parent.measureText(t)}begin(){this.$context2d.beginPath()}close(){this.$context2d.closePath()}save(){this.$parent.save()}restore(){this.$parent.restore()}rotate(t){if(void 0===t)return this.$parent.rotate();this.$parent.rotate(t)}translate(t,e){if(0===arguments.length)return this.$parent.translate();this.$parent.translate(t,e)}arc(t,e,s,i,n,r){this.begin(),this.$context2d.arc(this.$parent._getPixel(t),this.$parent._getPixel(e),s,this.$parent._toRadius(i)-Math.PI/2,this.$parent._toRadius(n)-Math.PI/2,r),this.close()}pie(t,e,s,i,n,r){this.begin(),this.move(t,e),this.arc(t,e,s,i,n,r),this.to(t,e),this.close()}line(t,e,s,i){this.move(t,e),this.to(s,i)}ellipse(t,e,s,i,n,r,o){this.begin(),this.$context2d.ellipse(this.$parent._getPixel(t),this.$parent._getPixel(e),s,i,this.$parent._toRadius(n)-Math.PI/2,this.$parent._toRadius(r),o),this.close()}circle(t,e,s){this.arc(t,e,s,0,"degress"===this.$parent.angleMode()?360:2*Math.PI)}point(t,e){this.circle(t,e,1)}triange(t,e,s,i,n,r){this.begin(),this.move(t,e),this.to(s,i),this.to(n,r),this.close()}drawImage(t,...e){this.$context2d.drawImage(t,...e)}rRect(t,e,s,i,n,r,o,a){this.begin(),[t,e,s,i]=this.$parent._argsRect(t,e,s,i);const h=this.$parent.fontSize(),c=[l(n,s,h),l(r,i,h),l(o,s,h),l(a,i,h)];this.move(t,e),this.arcTo(t+s,e,t+s,e+i-c[1],c[1]),this.arcTo(t+s,e+i,t+s-c[2],e+i,c[2]),this.arcTo(t,e+i,t,e+i-c[3],c[3]),this.arcTo(t,e,t+s-c[0],e,c[0]),this.close()}rect(t,e,s,i){this.begin(),[t,e,s,i]=this.$parent._argsRect(t,e,s,i),this.$context2d.rect(this.$parent._getPixel(t),this.$parent._getPixel(e),s,i),this.close()}quadratic(t,e,s,i){this.$context2d.quadraticCurveTo(t,e,s,i)}bezier(t,e,s,i,n,r){this.$context2d.bezierCurveTo(t,e,s,i,n,r)}move(t,e){this.$context2d.moveTo(this.$parent._getPixel(t),this.$parent._getPixel(e))}to(t,e){this.$context2d.lineTo(this.$parent._getPixel(t),this.$parent._getPixel(e))}fillText(t,e,s,i){this.$context2d.fillText(t,this.$parent._getPixel(e),this.$parent._getPixel(s),i)}strokeText(t,e,s,i){this.$context2d.strokeText(t,this.$parent._getPixel(e),this.$parent._getPixel(s),i)}fillRect(t,e,s,i){this.$context2d.fillRect(this.$parent._getPixel(t),this.$parent._getPixel(e),s,i)}strokeRect(t,e,s,i){this.$context2d.strokeRect(this.$parent._getPixel(t),this.$parent._getPixel(e),s,i)}lineDashOffset(t){if(void 0===t)return this.$context2d.lineDashOffset;this.$context2d.lineDashOffset=t}lineDash(...t){if(0===t.length)return this.$context2d.getLineDash();Array.isArray(t[0])&&this.$context2d.setLineDash(t[0]),this.$context2d.setLineDash(t)}arcTo(t,e,s,i,n){this.$context2d.arcTo(this.$parent._getPixel(t),this.$parent._getPixel(e),this.$parent._getPixel(s),this.$parent._getPixel(i),n)}isPoint(t,e){return this.$context2d.isPointInPath(t,e)}createImageData(t,e){return e?this.$parent.createImageData(t,e):this.$parent.createImageData(t)}getImageData(t,e,s,i){return this.$parent.getImageData(t,e,s,i)}putImageData(t,e,s,i,n,r,o){7===arguments.length?this.$parent.putImageData(t,e,s,i,n,r,o):this.$parent.putImageData(t,e,s)}createPattern(t,e){return this.$parent.createPattern(t,e)}createRadialGradient(t,e,s,i,n,r){return this.$parent.createRadialGradient(t,e,s,i,n,r)}createLinearGradient(t,e,s,i){return this.$parent.createLinearGradient(t,e,s,i)}lineJoin(t){if(void 0===t)return this.$context2d.lineJoin;this.$context2d.lineJoin=t}lineCap(t){if(void 0===t)return this.$context2d.lineCap;this.$context2d.lineCap=t}shadowBlur(t){if(void 0===t)return this.$context2d.shadowBlur;this.$context2d.shadowBlur=t}shadowColor(...t){this.$context2d.shadowColor=this.$parent._toRgb(t)}drawFocusIfNeeded(t,e){void 0===e?this.$context2d.drawFocusIfNeeded(t):this.$context2d.drawFocusIfNeeded(t,e)}polyline(...t){if(t.length>0)if(Array.isArray(t[0])){this.move(t[0][0],t[0][1]);let e=1;const{length:s}=t;for(;e<s;)this.to(t[e][0],t[e][1]),e++}else if(t.length>1){this.move(t[0],t[1]);let e=2;const{length:s}=t;for(;e<s-1;)this.to(t[e],t[e+1]),e+=2}}polygon(...t){Array.isArray(t[0])?this.polyline(...t,t[0]):this.polyline(...t,t[0],t[1])}}class p extends g{constructor(t,e,s){super(),this.__z=0,[this.__x,this.__y,this.__z]=[t,e,s||0]}get scale(){return p.persistent/(p.persistent+this.__z)}get x(){return(this.__x-this.$parent.width/2)*this.scale+this.$parent.width/2}set x(t){this.__x=t}get y(){return(this.__y-this.$parent.height/2)*this.scale+this.$parent.height/2}set y(t){this.__y=t}get z(){return this.__z}set z(t){this.__z=t}get(t){return"number"==typeof t?this.scale*t:this.scale*this[t]}}function x(t){return new class extends g{constructor(){super(...arguments),this.draw=t}}}p.persistent=1e3;class w{constructor(){this.__events=Object.create(null)}on(t,e){return"function"==typeof e&&(t in this.__events?this.__events[t].push(e):this.__events[t]=[e]),()=>{this.off(t,e)}}off(t,e){"function"==typeof e?(this.__events[t]=this.__events[t].filter((t=>t!==e)),0===this.__events[t].length&&delete this.__events[t]):delete this.__events[t]}emit(t,...e){if(t in this.__events)for(let s=0,i=this.__events[t].length;s<i;s++)this.__events[t][s](...e)}once(t,e){const s=(...i)=>{e(...i),this.off(t,s)};this.on(t,s)}}function y(t,e,s=[]){if(null!==t&&"object"==typeof t)if(Array.isArray(t))t.__reactive||(["push","pop","shift","unshift","splice"].forEach((i=>{const n=t[i];Object.defineProperty(t,i,{writable:!1,enumerable:!1,configurable:!0,value(){const t=n.apply(this,arguments);return e([...s],this,t),t}})})),Object.defineProperty(t,"__reactive",{writable:!1,enumerable:!1,configurable:!0,value:!0})),t.forEach(((t,i)=>{null!==t&&"object"==typeof t&&y(t,e,[...s,i+""])}));else{t.__reactive?t.__store={...t}:(Object.defineProperty(t,"__store",{writable:!0,enumerable:!1,configurable:!0,value:{...t}}),Object.defineProperty(t,"__reactive",{writable:!1,enumerable:!1,configurable:!0,value:!0}));for(const i in t)Object.defineProperty(t,i,{get:()=>t.__store?.[i],enumerable:!0,set(n){const r=t.__store?.[i];t.__store&&(t.__store[i]=n),n!==r&&(y(n,e,[...s,i]),e([...s,i],r,n))}}),y(t[i],e,[...s,i])}}class v{constructor(t){this.__emitter=new w;for(const e in t)this[e]=t[e];y(this,((t,e,s)=>{this.__emitter.emit(t.join("."),e,s)}))}$set(t,e,s){e in t||(t[e]=void 0,y(t,((t,e,s)=>{this.__emitter.emit(t.join("."),e,s)}))),t[e]=s}$watch(t,e){return this.__emitter.on(t,e)}}class ${constructor(){this.__store=new v}on(t,e){if(this.__store[t])e();else{const s=this.__store.$watch(t,(()=>{e(),s()}))}}emit(t){this.__store.$set(this.__store,t,!0)}}let b=!1;const M=new w;async function z(t){if("complete"===document.readyState){const e=t();e&&"length"in e&&await e,b=!0,M.emit("load")}else await new Promise((e=>{function s(){document.removeEventListener("DOMContentLoaded",s),window.removeEventListener("load",s),t(),e(),b=!0,M.emit("load")}document.addEventListener("DOMContentLoaded",s),window.addEventListener("load",s)}))}function P(t,s){!0===s.acceptClear&&s.clear(),t(),!0===s.acceptLoop&&e((()=>P(t,s)))}function C(t,e){b?e?P(t,e):t():M.once("load",(()=>{C(t,e)}))}class R{constructor(t,e,s){switch(this._id=R._count++,this._el=document.createElement("canvas"),this._context2dCaching=null,this._stamentReady=new $,this.__store={__translate:Object.create({x:0,y:0,sumX:0,sumY:0}),__scale:Object.create({x:0,y:0,sumX:0,sumY:0}),__rotate:Object.create({now:0,sum:0}),__attributeContext:Object.create({alpha:!0,desynchronized:!1}),_clear:!0,_loop:!0,_preventTouch:!1,_stopTouch:!1,_idFrame:null,_existsPreload:!1,_angleMode:"degress",_rectMode:"corner",_colorMode:"rgb",_useFloatPixel:!0},this.handlerEvent=t=>{try{"mouseout"!==t.type?(this.touches=d(this.$el,t.touches||[t]),this.changedTouches=d(this.$el,t.changedTouches||[t])):this.touches=[],this.__store._preventTouch&&t.preventDefault(),this.__store._stopTouch&&t.stopPropagation()}catch(t){}},this.touches=[],this.changedTouches=[],this.createElement=x,arguments.length){case 1:this.mount(t);break;case 2:this.size(t,s);break;case 3:this.mount(t),this.size(e,s)}this.restartEvents()}get $el(){return this._el}size(t,e){this.$el.width=t,this.$el.height=e}cancelEventsSystem(){["touchstart","mouseover","touchmove","mousemove","touchend","mouseout"].forEach((t=>{this.$el.removeEventListener(t,this.handlerEvent)}))}restartEvents(){this.cancelEventsSystem(),this.$el.addEventListener(_()?"touchstart":"mouseover",this.handlerEvent,o?{passive:!0}:void 0),this.$el.addEventListener(_()?"touchmove":"mousemove",this.handlerEvent,o?{passive:!0}:void 0),this.$el.addEventListener(_()?"touchend":"mouseout",this.handlerEvent,o?{passive:!0}:void 0)}preventTouch(){return!1===this.__store._preventTouch&&(this.__store._preventTouch=!0,!0)}stopTouch(){return!1===this.__store._preventTouch&&(this.__store._stopTouch=!0,!0)}get mouseX(){return this.touches[0]?.x||null}get mouseY(){return this.touches[0]?.y||null}get interact(){return this.touches.length>0}get id(){return this._id}_createNewContext2d(){this._context2dCaching=this.$el.getContext("2d",this.__store.__attributeContext)}acceptBlur(){return this.__store.__attributeContext.alpha}blur(){this.__store.__attributeContext.alpha=!0,this._createNewContext2d()}noBlur(){this.__store.__attributeContext.alpha=!1,this._createNewContext2d()}acceptDesync(){return this.__store.__attributeContext.desynchronized}desync(){this.__store.__attributeContext.desynchronized=!0,this._createNewContext2d()}noDesync(){this.__store.__attributeContext.desynchronized=!1,this._createNewContext2d()}useFloatPixel(){this.__store._useFloatPixel=!0}noFloatPixel(){this.__store._useFloatPixel=!1}_getPixel(t){return this.__store._useFloatPixel?t:Math.round(t)}get $context2d(){return null===this._context2dCaching&&this._createNewContext2d(),this._context2dCaching}append(t=document.body){!1===t.contains(this.$el)&&t.appendChild(this.$el)}mount(t){let e;"string"==typeof t?e=Array.from(document.querySelectorAll(t)).find((t=>"CANVAS"===t.tagName))||this._el:"CANVAS"!==t.tagName?(console.error(`fCanvas<sys>: function .mount() not allow element "${t?.tagName.toLocaleLowerCase()}`),e=this._el):e=t,this._el!==e&&this.cancelEventsSystem(),this._el=e}noClear(){this.__store._clear=!1}get acceptClear(){return this.__store._clear}run(...t){let e=0;const{length:s}=t;for(;e<s;)t[e++]._run(this)}get width(){return this.$el.width}set width(t){this.$el.width=t}get height(){return this.$el.height}set height(t){this.$el.height=t}get windowWidth(){return a.get()}get windowHeight(){return h.get()}save(){this.$context2d.save()}restore(){this.$context2d.restore()}_toRadius(t){return"degress"===this.__store._angleMode?t*Math.PI/180:t}_toDegress(t){return"degress"===this.__store._angleMode?180*t/Math.PI:t}_toRgb([t=0,e=t,s=e,i=1]){if(Array.isArray(t))return this._toRgb(t);if("object"==typeof t&&null!==t)return t;if("string"==typeof t)return t;{const n=this.__store._colorMode.match(/hsl|hsb/i)?"%":"";return`${this.__store._colorMode}a(${[t,e+n,s+n,i].join(",")})`}}_argsRect(t,e,s,i){switch(this.__store._rectMode){case"center":return[t-s/2,e-i/2,s,i];case"radius":return[t-s,e-i,2*s,2*i];case"corners":return[t-s,e-i,s,i];case"corner":default:return[t,e,s,i]}}angleMode(t){if(void 0===t)return this.__store._angleMode;this.__store._angleMode=t}colorMode(t){if(void 0===t)return this.__store._colorMode;this.__store._colorMode=t}rectMode(t){if(void 0===t)return this.__store._rectMode;this.__store._rectMode=t}fontSize(t){const{size:e,weight:s,family:i}=u(this.font());if(void 0===t)return e;t=l(t,e,e),this.font([s,`${t}px`,i].join(" "))}fontFamily(t){const{size:e,weight:s,family:i}=u(this.font());if(void 0===t)return i;this.font([s,`${e}px`,t].join(" "))}fontWeight(t){const{size:e,weight:s,family:i}=u(this.font());if(void 0===t)return s;this.font([t,`${e}px`,i].join(" "))}clear(t=0,e=0,s=this.width,i=this.height){this.$context2d.clearRect(t,e,s,i)}background(...t){this.$context2d.fillStyle=this._toRgb(t),this.$context2d.fill(),this.$context2d.fillRect(0,0,this.width,this.height)}backgroundImage(t){this.$context2d.drawImage(t,0,0,this.width,this.height)}createImageData(t,e){return e?this.$context2d.createImageData(t,e):this.$context2d.createImageData(t)}getImageData(t,e,s,i){return this.$context2d.getImageData(t,e,s,i)}putImageData(t,e,s,i,n,r,o){7===arguments.length?this.$context2d.putImageData(t,e,s,i,n,r,o):this.$context2d.putImageData(t,e,s)}createPattern(t,e){return this.$context2d.createPattern(t,e)}createRadialGradient(t,e,s,i,n,r){return this.$context2d.createRadialGradient(t,e,s,i,n,r)}createLinearGradient(t,e,s,i){return this.$context2d.createLinearGradient(t,e,s,i)}toDataURL(t="image/png",e){return this.$el.toDataURL(t,e)}rotate(t){if(void 0===t)return this.__store.__rotate.now;this.$context2d.rotate(this.__store.__rotate.now=this._toRadius(t)),this.__store.__rotate.sum+=this.__store.__rotate.now%360}resetRotate(){this.rotate(-this.__store.__rotate.sum)}resetTransform(){this.setTransform(1,0,0,1,0,0)}async preload(t){this.__store._existsPreload=!0,await t(),this._stamentReady.emit("preloaded")}async setup(t){this.__store._existsPreload?this._stamentReady.on("preloaded",(async()=>{await z(t),this._stamentReady.emit("setuped")})):(await z(t),this._stamentReady.emit("setuped"))}draw(t){this._stamentReady.on("setuped",(()=>{C(t,this)}))}font(t){if(void 0===t)return this.$context2d.font;this.$context2d.font=t}textAlign(t){if(void 0===t)return this.$context2d.textAlign;this.$context2d.textAlign=t}textBaseline(t){if(void 0===t)return this.$context2d.textBaseline;this.$context2d.textBaseline=t}operation(t){if(void 0===t)return this.$context2d.globalCompositeOperation;this.$context2d.globalCompositeOperation=t}alpha(t){if(void 0===t)return this.$context2d.globalAlpha;this.$context2d.globalAlpha=t}resetAlpha(){this.alpha(1)}translate(t,e){if(0===arguments.length)return{x:this.__store.__translate.x,y:this.__store.__translate.y};t=this._getPixel(t||0),e=this._getPixel(e||0),this.$context2d.translate(t,e),this.__store.__translate.sumX+=t,this.__store.__translate.sumY+=e}resetTranslate(){this.$context2d.translate(-this.__store.__translate.sumX,-this.__store.__translate.sumY)}scale(t,e){if(0===arguments.length)return{x:this.__store.__scale.x,y:this.__store.__scale.y};this.$context2d.scale(t,e),this.__store.__scale.sumX+=t||0,this.__store.__scale.sumY+=e||0}resetScale(){this.$context2d.translate(-this.__store.__scale.sumX,-this.__store.__scale.sumY)}clip(t,e){void 0===e&&this.$context2d.clip(t),this.$context2d.clip(e,t)}transform(t,e,s,i,n,r){if(0===arguments.length)return this.$context2d.getTransform();if(t instanceof DOMMatrix){const{a:e=1,b:s=0,c:i=0,d:n=1,e:r=0,f:o=0}=t;this.$context2d.transform(e,s,i,n,r,o)}else this.$context2d.transform(t,e,s,i,n,r)}setTransform(t,e,s,i,n,r){if(t instanceof DOMMatrix){const{a:e=1,b:s=0,c:i=0,d:n=1,e:r=0,f:o=0}=t;this.$context2d.setTransform(e,s,i,n,r,o)}else this.$context2d.setTransform(t,e,s,i,n,r)}measureText(t){return this.$context2d.measureText(t).width}sin(t){return Math.sin(this._toRadius(t))}asin(t){return this._toDegress(Math.asin(t))}cos(t){return Math.cos(this._toRadius(t))}acos(t){return this._toDegress(Math.acos(t))}tan(t){return Math.tan(this._toRadius(t))}atan(t){return this._toDegress(Math.atan(t))}atan2(t,e){return this._toDegress(Math.atan2(t,e))}cursor(){this.$el.style.cursor="auto"}noCursor(){this.$el.style.cursor="none"}loop(){this.__store._loop=!0,this._stamentReady.emit("setuped")}noLoop(){this.__store._loop=!1,this.__store._idFrame&&s(this.__store._idFrame)}get acceptLoop(){return this.__store._loop}mouseIn(t){return m("mouseover",t,this.$el)}mouseOut(t){return m("mouseout",t,this.$el)}touchStart(t){return m("touchstart",t,this.$el)}touchMove(t){return m("touchmove",t,this.$el)}touchEnd(t){return m("touchend",t,this.$el)}mouseMove(t){return m("mousemove",t,this.$el)}mouseUp(t){return m("mouseup",t,this.$el)}mouseDown(t){return m("mousedown",t,this.$el)}mouseClicked(t){return m("click",t,this.$el)}}R.Element=g,R.Point3D=class extends g{constructor(t,e,s){super(),this.x=0,this.y=0,this.z=0,[this.x,this.y,this.z]=[t||0,e||0,s||0]}rotateX(t){this.y=this.y*this.$parent.cos(t)+this.z*this.$parent.sin(t),this.z=-this.y*this.$parent.sin(t)+this.z*this.$parent.cos(t)}rotateY(t){this.x=this.x*this.$parent.cos(t)+this.z*this.$parent.sin(t),this.z=-this.x*this.$parent.sin(t)+this.z*this.$parent.cos(t)}rotateZ(t){this.x=this.x*this.$parent.cos(t)-this.y*this.$parent.sin(t),this.y=this.x*this.$parent.sin(t)+this.y*this.$parent.cos(t)}},R.Point3DCenter=p,R._count=0;const E=new R;function k(t,e,s){return 0!==t&&(s.x=s.x%t),0!==e&&(s.y=s.y%e),s}function L(t,e,s,i){return 0!==t&&(i.x=i.x%t),0!==e&&(i.y=i.y%e),0!==s&&(i.z=i.z%s),i}class I{constructor(t=0,e=0,s=0){[this.x,this.y,this.z]=[t,e,s]}set(t,e,s){return t instanceof I?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this):t instanceof Array?(this.x=t[0]||0,this.y=t[1]||0,this.z=t[2]||0,this):(this.x=t||0,this.y=e||0,this.z=s||0,this)}copy(){return new I(this.x,this.y,this.z)}add(t,e,s){return t instanceof I?(this.x+=t.x||0,this.y+=t.y||0,this.z+=t.z||0,this):t instanceof Array?(this.x+=t[0]||0,this.y+=t[1]||0,this.z+=t[2]||0,this):(this.x+=t||0,this.y+=e||0,this.z+=s||0,this)}rem(t){if(t instanceof I)Number.isFinite(t.x)&&Number.isFinite(t.y)&&Number.isFinite(t.z)&&L(t.x,t.y,t.z,this);else if(t instanceof Array)t.every((function(t){return Number.isFinite(t)}))&&(2===t.length&&k(t[0],t[1],this),3===t.length&&L(t[0],t[1],t[2],this));else if(1===arguments.length)Number.isFinite(arguments[0])&&0!==arguments[0]&&(this.x=this.x%arguments[0],this.y=this.y%arguments[0],this.z=this.z%arguments[0]);else if(2===arguments.length){const t=[].slice.call(arguments);t.every((function(t){return Number.isFinite(t)}))&&2===t.length&&k(t[0],t[1],this)}else if(3===arguments.length){var e=[].slice.call(arguments);e.every((function(t){return Number.isFinite(t)}))&&3===e.length&&L(e[0],e[1],e[2],this)}}sub(t,e,s){return t instanceof I?(this.x-=t.x||0,this.y-=t.y||0,this.z-=t.z||0,this):t instanceof Array?(this.x-=t[0]||0,this.y-=t[1]||0,this.z-=t[2]||0,this):(this.x-=t||0,this.y-=e||0,this.z-=s||0,this)}mult(t){return this.x*=t,this.y*=t,this.z*=t,this}div(t){return 0===t?(console.warn("div:","divide by 0"),this):(this.x/=t,this.y/=t,this.z/=t,this)}mag(){return Math.sqrt(this.magSq())}magSq(){const{x:t,y:e,z:s}=this;return t*t+e*e+s*s}dot(t,e,s){return t instanceof I?this.dot(t.x,t.y,t.z):this.x*(t||0)+this.y*(e||0)+this.z*(s||0)}cross(t){return new I(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}normalize(){const t=this.mag();return 0!==t&&this.mult(1/t),this}limit(t){const e=this.magSq();return e>t**2&&this.div(Math.sqrt(e)).mult(t),this}setMag(t){return this.normalize().mult(t)}heading(){return Math.atan2(this.y,this.x)}rotate(t){const e=this.heading()+t,s=this.mag();return this.x=Math.cos(e)*s,this.y=Math.sin(e)*s,this}angleBetween(t){const e=this.dot(t)/(this.mag()*t.mag());return Math.acos(Math.min(1,Math.max(-1,e)))*Math.sign(this.cross(t).z||1)}lerp(t=0,e=0,s=0,i=0){return t instanceof I?this.lerp(t.x,t.y,t.z,e):(this.x+=(t-this.x)*i||0,this.y+=(e-this.y)*i||0,this.z+=(s-this.z)*i||0,this)}reflect(t){return t.normalize(),this.sub(t.mult(2*this.dot(t)))}array(){return[this.x||0,this.y||0,this.z||0]}equals(t,e,s){let i,n,r;return t instanceof I?(i=t.x||0,n=t.y||0,r=t.z||0):t instanceof Array?(i=t[0]||0,n=t[1]||0,r=t[2]||0):(i=t||0,n=e||0,r=s||0),this.x===i&&this.y===n&&this.z===r}toString(){return"Vector: ["+this.array().join(", ")+"]"}}function A(t,e,s,i,n,r=3){return function(t,e,s,i,n,r){switch(t){case"ease":return(e/=n/2)<1?i/2*Math.pow(e,r)+s:(e-=2,i/2*(Math.pow(e,r)+2)+s);case"quadratic":return(e/=n/2)<=1?i/2*e*e+s:i/2*-1*(--e*(e-2)-1)+s;case"sine-ease-in-out":return-i/2*(Math.cos(Math.PI*e/n)-1)+s;case"quintic-ease":return(e/=n/2)<1?i/2*Math.pow(e,5)+s:(e-=2,i/2*(Math.pow(e,5)+2)+s);case"exp-ease-in-out":return(e/=n/2)<1?i/2*Math.pow(2,10*(e-1))+s:(e--,i/2*(2-Math.pow(2,-10*e))+s);case"linear":return s+i/n*e}}(t,i,e,s-e,n,r)}function N(t){if(Array.isArray(t)){let e=Object.create(null);t.forEach(((t,s)=>{e[`${s}`]=t})),t=e}return t}function T(...t){let e,s,i;return"length"in t[0]||null!==t[0]&&"object"==typeof t[0]?(e=t[0],[i,s]=function(t){const e=t.findIndex((t=>"string"==typeof t));return e>-1?[t[e],+t[0===e?1:0]]:[t[1],+t[0]]}(t.slice(1))):e=N(t),[e,s,i]}function j(t,e,s){return Math.min(Math.max(e,t),s)}function D(t){const e=new Image;return e.src=t,new Promise(((t,s)=>{e.addEventListener("load",(function s(){t(e),e.removeEventListener("load",s)})),e.addEventListener("error",(function t(i){s(i),e.removeEventListener("error",t)}))}))}function O(t){const e=document.createElement("audio");return e.src=t,new Promise(((t,s)=>{e.addEventListener("load",(function s(){t(e),e.removeEventListener("load",s)})),e.addEventListener("error",(function t(i){s(i),e.removeEventListener("error",t)}))}))}function S(...t){return 1===t.length?null!==t[0]&&"object"==typeof t[0]&&"length"in t[0]?t[0][Math.floor(Math.random()*t[0].length)]:Math.random()*t[0]:2===t.length?t[0]+Math.random()*(t[1]-t[0]):void 0}const F="function"==typeof Math.hypot?Math.hypot:(...t)=>{const e=t.length;let s=0,i=0;for(;s<e;)i+=Math.pow(t[s++],2);return Math.sqrt(i)};let q;function X(t,e=0,s=0,i=f(`${t.width}`),n=f(`${t.height}`),r=0){void 0===q&&(q=document.createElement("canvas").getContext("2d"));const o=r*Math.PI/180,[a,h]=function(t,e,s){return[Math.abs(t*Math.cos(s))+Math.abs(e*Math.sin(s)),Math.abs(t*Math.sin(s))+Math.abs(e*Math.cos(s))]}(i,n,o);q.canvas.width=i,q.canvas.height=n,q.save(),q.translate(i/2,n/2),q.rotate(r*Math.PI/180),q.drawImage(t,e,s,a,h,-a/2,-h/2,a,h),q.restore();const c=new Image;return c.src=q.canvas.toDataURL(),q.clearRect(0,0,i,n),c}class Y{constructor(t,e,s,i,n){this._offset=Object.create({x:0,y:0}),this._watchers=Object.create(null),this._canvas=t,this._viewport={x:e,y:s,width:i,height:n}}get x(){return this._offset.x}set x(t){const e=this._offset.x;let s=!0;this._watchers.x?.forEach((i=>{!1===i(t,e)&&(s=!1)})),s&&(this._offset.x=t)}get y(){return this._offset.y}set y(t){const e=this._offset.y;let s=!0;this._watchers.y?.forEach((i=>{!1===i(t,e)&&(s=!1)})),s&&(this._offset.y=t)}$watch(t,e){return t in this._watchers==!1&&(this._watchers[t]=[]),this._watchers[t].push(e),()=>{const s=this._watchers[t]?.findIndex((t=>t===e));s&&-1!==s&&this._watchers[t].splice(s,1)}}getXOffset(t,e=1){return t-j(this.x*e,this._viewport.x,this._viewport.width-this._canvas.width)}getYOffset(t,e=1){return t-j(this.y*e,this._viewport.y,this._viewport.height-this._canvas.height)}isLimitX(){return this.x<this._viewport.x?-1:this.x>this._viewport.width-this._canvas.width?1:0}isLimitY(){return this.y<this._viewport.y?-1:this.y>this._viewport.height-this._canvas.height?1:0}isXInViewBox(t,e=0,s=1){return t instanceof g&&(e=t.width||0,t=t.x||0),(t=this.getXOffset(t,s))+e>0||t<this._canvas.width}isYInViewBox(t,e=0,s=1){return t instanceof g&&(e=t.height||0,t=t.y||0),(t=this.getYOffset(t,s))+e>0||t<this._canvas.height}isInViewBox(t,e,s=0,i=0,n=1,r=1){return t instanceof g?this.isXInViewBox(t,n)&&this.isYInViewBox(t,r):this.isXInViewBox(t,s,n)&&this.isYInViewBox(e,i,r)}}function B(t){const e=t.textContent;let s=t.nextElementSibling;if(null==s)throw new Error("fCanvas<loadResourceImage>: Error because syntax error in file plist.");if("dict"===s.tagName){let t={};return Array.from(s.childNodes).filter((t=>"key"===t.tagName)).forEach((e=>{t={...t,...B(e)}})),{[e]:t}}if("array"===s.tagName){let t=[];return Array.from(s.childNodes).filter((t=>"key"===t.tagName)).forEach((e=>{t.push(B(e))})),{[e]:t}}return"string"===s.tagName?{[e]:s.textContent}:"integer"===s.tagName?{[e]:parseInt(s.textContent)}:"float"===s.tagName?{[e]:parseFloat(s.textContent)}:"true"===s.tagName?{[e]:!0}:"false"===s.tagName?{[e]:!1}:{}}Y.Cursor=class{constructor(t,e){this._camera=t,this._config=e;const s=t=>{this._camera.$watch(t,((e,s)=>{const i=e-s;if(this._config[t].dynamic){if(i<0?this[t]>this._config[t].min:this[t]<this._config[t].max)return this[t]+=i,!1}else("x"===t?this._camera.isLimitX():this._camera.isLimitY())===(i<0?-1:1)&&this[t]>this._config[t].min&&(this[t]+=i)}))};s("x"),s("y")}get x(){return this._config.x.current}set x(t){}get y(){return this._config.y.current}set y(t){}};class W{constructor(t,e){this.__caching=new Map,this.image=t,this.plist=e}get(t){if(this.has(t)){const{frame:e,rotated:s,sourceSize:i}=this.plist.frames[t],n=e.replace(/\{|\}|\s/g,"").split(","),r=i.replace(/\{|\}|\s/g,"").split(",");if(!1===this.__caching.has(t)){const e=X(this.image,+n[0],+n[1],+n[2],+n[3],s?-90:0);this.__caching.set(t,Object.assign(e,{image:e,size:{width:+r[0],height:+r[1]}}))}return this.__caching.get(t)}throw new Error(`fCanvas<addons/loadResourceImage>: Error does not exist this file "${t}" in declaration .plist`)}has(t){return t in this.plist.frames}}async function V(t){null==t.match(/\.plist$/)&&(t+=".plist");const e=await fetch(`${t}`).then((t=>t.text())).then((t=>(new DOMParser).parseFromString(t,"text/xml")));let s={};e.querySelectorAll("plist > dict:first-child > key").forEach((t=>{s={...s,...B(t)}}));const i=await D(function(...t){if(t[1].match(/^[a-z]+:\/\//i))return t[1];const e=t[0].replace(/\/$/,"").split("/");return t[0]=e.slice(0,e.length-1).join("/"),t.join("/")}(t,s?.metadata.realTextureFileName||s?.metadata.textureFileName));return new W(i,s)}function G(t){let{x:e,y:s}=t;return"rect"===t.type&&([e,s]=t.$parent._argsRect(t.x,t.y,t.width,t.height)),{x:e,y:s}}function H(t,e){let{x:s,y:i}=G(t),{x:n,y:r}=G(e);return 180*Math.atan2(n-s,r-i)/Math.PI}function J(t,e,s=!0){switch(t.type){case"rect":switch(e.type){case"rect":if(c=e,(h=t).x<c.x+c.width&&h.x+h.width>c.x&&h.y<c.y+c.height&&h.y+h.height>c.y)return!s||{direction:H(t,e),element:e};break;case"circle":if(function(t,e){const s=Math.max(e.x,Math.min(t.x,e.x+e.width)),i=Math.max(e.y,Math.min(t.y,e.y+e.height));return(s-t.x)*(s-t.x)+(i-t.y)*(i-t.y)<t.radius**2}(e,t))return!s||{direction:H(t,e),element:e};break;case"point":if(r=t,o=e.x,a=e.y,null!=o&&null!=a&&r.x<o&&r.x+r.width>o&&r.y<a&&r.y+r.height>a)return!s||{direction:H(t,e),element:e}}break;case"circle":switch(e.type){case"rect":return J(e,t,s);case"circle":if(n=e,((i=t).x-n.x)**2+(i.y-n.y)**2<(i.radius+n.radius)**2)return!s||{direction:H(t,e),element:e};break;case"point":if(function(t,e,s){return null!=e&&null!=s&&(e-t.x)**2+(s-t.y)**2<t.radius**2}(t,e.x,e.y))return!s||{direction:H(t,e),element:e}}break;case"point":switch(e.type){case"rect":case"circle":return J(e,t,s);case"point":if(t.x===e.x&&t.y===e.y)return!s||{direction:H(t,e),element:e}}}var i,n,r,o,a,h,c;return!s&&null}t.Animate=class{constructor(...t){this.__data={__observe:{}},this.__fps=1e3/60,this.__eventsStore=Object.create(null),this.__queue=[],this.time=0,this.easing="ease",this.__frame=1;const[e,s,i]=T(...t);this.data=e??this.data,this.time=Number.isNaN(s)?this.time:s??this.time,this.easing=i??this.easing}set data(t){this.__data=function(t,e){delete t.__observe,t=N(t);const s={};for(const i in t)s[i]=[t[i],t[i]],Object.defineProperty(t,i,{get:()=>A(e.easing,s[i][0],s[i][1],e.frame,e.frames),set(t){s[i][1]=t}});return Object.defineProperty(t,"__observe",{writable:!0,enumerable:!1,configurable:!0,value:s}),t}(t,this);for(const t in this.__data)Object.defineProperty(this,t,{get(){return this.__data[t]}})}get(t){return this.__data[t]}get frames(){return Math.max(function(t,e=1e3/60){return t/e}(this.time,this.__fps),1)}get frame(){return Math.min(this.__frame,this.frames)}set frame(t){this.__frame=Math.min(t,this.frames),this.frame===this.frames&&(this.emit("done"),this.__queue.length>0&&(this._to(...this.__queue[0]),this.__queue.splice(0,1)))}on(t,e){t in this.__eventsStore?this.__eventsStore[t].push(e):this.__eventsStore[t]=[e]}off(t,e){e?(this.__eventsStore[t]=this.__eventsStore[t]?.filter((t=>t!==e)),0===this.__eventsStore[t]?.length&&delete this.__eventsStore[t]):delete this.__eventsStore[t]}emit(t,...e){this.__eventsStore[t]?.forEach((t=>{t.call(this,...e)}))}once(t,e){const s=(...i)=>{e.call(this,...i),this.off(t,s)};this.on(t,s)}setFPS(t){this.__fps=t}action(){this.frame++}cancel(t){if(t)t in this.__data&&t in this.__data.__observe&&(this.__data.__observe[t][0]=this.__data[t],this.emit("cancel",t));else for(const t in this.__data)this.cancel(t)}_to(...t){const[e,s,i]=T(...t);for(const t in e)t in this.__data&&t in this.__data.__observe?(this.cancel(t),this.__data.__observe[t][1]=+e[t]):console.error(`fCanvas<animate.ts>: "${t}" is not signed.`);this.frame=0,this.time=Number.isNaN(s)?this.time:s??this.time,this.easing=i??this.easing}to(...t){this._to(...t),this.__queue.splice(0)}get running(){return this.frame<this.frames}add(...t){this.__queue.push(T(...t))}set(...t){this.data=T(...t)[0]}},t.Camera=Y,t.Emitter=w,t.Resource=class{constructor(t,e=!0){this._resourcesLoaded=new Map,this._desResources=Object.create(null);const s={};for(const e in t)"object"==typeof t[e]?s[e]={...t[e]}:s[e]={src:t[e],lazy:!1,type:"plist"};this._desResources=s;const{set:i,delete:n}=this._resourcesLoaded,r=this;if(this._resourcesLoaded.set=function(...t){return r._set(t[0],t[1]),i.apply(this,t)},this._resourcesLoaded.delete=function(...t){return r._delete(t[0]),n.apply(this,t)},e){const t=[];for(const e in this._desResources)!1===this._desResources[e].lazy&&t.push(this.load(e));return new Promise((async(e,s)=>{try{await Promise.all(t),e(this)}catch(t){s(t)}}))}}_set(t,e){this[t]=e}_delete(t){t in this&&delete this[t]}isLoaded(t){if(t)return this._resourcesLoaded.has(t);for(const t in this._desResources)if(!1===this._resourcesLoaded.has(t))return!1;return!0}async load(t){if(t)if(t in this._desResources)if(!1===this.isLoaded(t)){switch(this._desResources[t].type){case"image":this._resourcesLoaded.set(t,await D(this._desResources[t].src));break;case"audio":this._resourcesLoaded.set(t,await O(this._desResources[t].src));break;case"plist":this._resourcesLoaded.set(t,await V(this._desResources[t].src));break;default:console.warn(`fCanvas<Resource>: can't load "${t} because it is "${this._desResources[t].type}`)}this._resourcesLoaded.set(t,await V(this._desResources[t].src))}else console.warn(`fCanvas<Resource>: "${t}" resource loaded.`);else console.error(`fCanvas<Resource>: "${t} resource not exists.`)}get(t){const e=t.split("/"),s=e[0],i=e.slice(1).join("/"),n=this._desResources[s];if(n){if(this._resourcesLoaded.has(s)){const t=this._resourcesLoaded.get(s);if(t)switch(n.type){case"image":case"audio":return t;case"plist":return i?t.get(i):t;default:throw new Error(`fCanvas<Resource>: "can't get "${s} because not support type "${n.type}".`)}throw new Error(`fCanvas<Resource>: "${s} not exists.`)}throw new Error(`fCanvas<Resource>: "${s} not loaded.`)}throw new Error(`fCanvas<Resource>: "${s}" not exitst.`)}},t.Store=v,t.Vector=I,t.aspectRatio=function(t,e,s){const i=t*s;return e<i?[e,e/t]:[i,s]},t.cancelAnimationFrame=s,t.changeSize=function(t,e=window){return m("resize",t,e)},t.constrain=j,t.createElement=x,t.cutImage=X,t.default=R,t.draw=C,t.even=function(t,e,s){return t===e?s:t-1},t.getDirectionElement=H,t.hypot=F,t.interferings=function(t,...e){let s;return e.some((e=>{const i=J(t,e);if(i)return s=i,!0})),s??null},t.interferingsBoolean=function(t,...e){return e.some((e=>J(t,e,!1)))},t.isMobile=_,t.isTouch=i,t.keyPressed=function(t,e=window){return m("keydown",t,e)},t.keyUp=function(t,e=window){return m("keyup",t,e)},t.lerp=function(t,e,s){return s*(e-t)+t},t.loadAudio=O,t.loadImage=D,t.loadResourceImage=V,t.map=function(t,e,s,i,n){return(t-e)*(n-i)/(s-e)+i},t.mouseClicked=function(t,e=window){return m("click",t,e)},t.mouseMoved=function(t,e=window){return m("mousemove",t,e)},t.mousePressed=function(t,e=window){return m("mousedown",t,e)},t.mouseWheel=function(t,e=window){return m("wheel",t,e)},t.odd=function(t,e,s){return t===s?e:t+1},t.passive=o,t.random=S,t.randomInt=function(t,e){return void 0===e?Math.round(S(t)):Math.round(S(t,e))},t.range=function(t,e,s){s=s||1;const i=[];let n=!1;if(void 0===e&&(e=t,t=1),"string"==typeof t&&(t=t.charCodeAt(0),e=e.charCodeAt(0),n=!0),t!==e&&Math.abs(e-t)<Math.abs(s))throw new Error("range(): step exceeds the specified range.");if(e>t)for(s<0&&(s*=-1);t<=e;)i.push(n?String.fromCharCode(t):t),t+=s;else for(s>0&&(s*=-1);t>=e;)i.push(n?String.fromCharCode(t):t),t+=s;return i},t.requestAnimationFrame=e,t.setup=z,t.touchEnd=function(t,e=window){return m("touchend",t,e)},t.touchMove=function(t,e=window){return m("touchmove",t,e)},t.touchStart=function(t,e=window){return m("touchstart",t,e)},t.unlimited=function(t,e,s){return t<e||t>s},Object.defineProperty(t,"__esModule",{value:!0})}));
